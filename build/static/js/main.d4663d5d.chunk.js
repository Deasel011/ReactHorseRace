(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(t,e,n){t.exports=n(242)},120:function(t,e,n){},122:function(t,e,n){t.exports=n.p+"static/media/logo.5d5d9eef.svg"},123:function(t,e,n){},242:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n.n(a),o=n(46),r=n.n(o),s=(n(120),n(5)),c=n(6),h=n(8),u=n(7),f=n(9),l=(n(122),n(123),n(243)),d=n(245),p=n(244),m=n(2),b=n(30),g=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(h.a)(this,Object(u.a)(e).call(this))).handleSubmit=function(){var e=document.getElementById("game-id-field").value;alert("HELLO "+e),t.props.history.push("/game")},t.handleSubmit=t.handleSubmit.bind(Object(m.a)(Object(m.a)(t))),t}return Object(f.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this;return i.a.createElement("div",null,i.a.createElement("h1",null,"HorseRace Group Insurance"),i.a.createElement(b.Form,{id:"formbox",name:"roombox",method:"get"},i.a.createElement("label",{htmlFor:"game-id-field"},"Enter the room you want to race in "),i.a.createElement(b.Text,{field:"name",id:"game-id-field",placeholder:"69"}),i.a.createElement("button",{type:"submit",onClick:function(){return t.props.history.push("/game?room="+document.getElementById("game-id-field").value)}},"Talk to me Goose!")))}}]),e}(i.a.Component),w=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(h.a)(this,Object(u.a)(e).call(this))).state={horse:null,horse_list:[]},t.obtainHorseNameFromQuery=t.obtainHorseNameFromQuery.bind(Object(m.a)(Object(m.a)(t))),t}return Object(f.a)(e,t),Object(c.a)(e,[{key:"obtainHorseNameFromQuery",value:function(){return new URLSearchParams(this.props.location.search).get("horse")}},{key:"componentWillMount",value:function(){this.setState({horse:this.obtainHorseNameFromQuery()})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"Game Lobby #",new URLSearchParams(this.props.location.search).get("room")),i.a.createElement(k,{parent_props:this.state,history:this.props.history}))}}]),e}(i.a.Component),k=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(h.a)(this,Object(u.a)(e).call(this,t))).state={},n}return Object(f.a)(e,t),Object(c.a)(e,[{key:"addHorse",value:function(t){this.props.history.push(window.location.pathname+window.location.search+"&horse="+t),this.setState({horse:t})}},{key:"componentWillMount",value:function(){this.setState(this.props.parent_props)}},{key:"render",value:function(){var t=this;return null!=this.state.horse?i.a.createElement("div",null,i.a.createElement("h2",null,this.state.horse.charAt(0).toUpperCase()+this.state.horse.slice(1)),i.a.createElement("p",null,"Is being watched by you!")):i.a.createElement(b.Form,{id:"formbox",name:"horsebox",method:"get"},i.a.createElement("label",{htmlFor:"horse-id-field"},"Enter a horse name "),i.a.createElement(b.Text,{field:"name",id:"horse-id-field",placeholder:"James"}),i.a.createElement("button",{type:"submit",onClick:function(){return t.addHorse(document.getElementById("horse-id-field").value)}},"Talk to me Goose!"))}}]),e}(i.a.Component),v=w,y=n(19),j=n(16),O=n(72),S=n.n(O),x=n(107),E=n(39),W=n.n(E);function I(){var t=Object(y.a)(["\n    fill:black;stroke:",";stroke-width:5;opacity:1\n"]);return I=function(){return t},t}var D=j.a.rect(I(),function(t){return t.strokeColor}),H=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(h.a)(this,Object(u.a)(e).call(this,t))).state={name:t.horse.name,width:window.innerWidth,height:window.innerHeight,direction:"east",step:0,lap:0,x:0,y:0,horseId:t.horse.horseId,lapsToWin:t.lapsToWIn||1,horseIndex:n.props.horseIndex||0,rank:0,running:!1,finished:!1,color:"",timeStart:null},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(m.a)(Object(m.a)(n))),n.placeWithStep=n.placeWithStep.bind(Object(m.a)(Object(m.a)(n))),n.takeAStep=n.takeAStep.bind(Object(m.a)(Object(m.a)(n))),n.setRandomHorseColor=n.setRandomHorseColor.bind(Object(m.a)(Object(m.a)(n))),n}return Object(f.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillMount",value:function(){this.placeWithStep(),this.setRandomHorseColor()}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"takeAStep",value:function(){this.state.step>10&&(this.state.step+1)%100===0&&this.setState({lap:this.state.lap+1}),this.setState({step:this.state.step+1}),this.placeWithStep()}},{key:"takeAStepEachSecond",value:function(){var t=this;setTimeout(function(){t.takeAStep(),t.takeAStepEachSecond()},50)}},{key:"updateStepsTaken",value:function(t){W.a.put("https://iahorserace.azurewebsites.net//games/"+this.props.roomid+"/horses/"+this.state.horseId+"/position",t).then(function(t){}).catch(function(t){console.error(t.message)})}},{key:"takeAStepFromApi",value:function(){var t=Object(x.a)(S.a.mark(function t(){var e=this;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:W.a.post("https://iahorserace.azurewebsites.net//games/"+this.props.roomid+"/horses/"+this.state.horseId+"/step").then(function(t){e.takeAStep(),e.state.lapsToWin<=e.state.lap?(e.setState({finished:!0}),e.updateStepsTaken({finished:!0,timeInMillis:Date.now()%5e4,steps:e.state.step})):(e.takeAStepFromApi(),e.updateStepsTaken({timeInMillis:Date.now()%5e4,steps:e.state.step}))}).catch(function(t){console.log(e.state.name+" just stumbled..."),e.takeAStepFromApi()});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"placeWithStep",value:function(){var t,e=0,n=0,a=this.state.step,i=this.state.horseIndex;switch(a<17?1:a<33?2:a<67?3:a<83?4:5){case 1:t="east",e=this.state.width/2+10-(24+.25*parseInt(i))*a,n=this.state.height/2-115-4*i;break;case 2:t="south",e=this.state.width/2+10-16*(24+.25*parseInt(i)),n=this.state.height/2-115-4*i+22*(a-16);break;case 3:t="west",e=this.state.width/2+10-16*(24+.25*parseInt(i))+(21.5+.25*parseInt(i))*(a-32),n=this.state.height/2-115-4*i+352;break;case 4:t="north",e=this.state.width/2+10-16*(24+.25*parseInt(i))+34*(21.5+.25*parseInt(i)),n=this.state.height/2-115-4*i+352-22*(a-66);break;case 5:t="east",e=this.state.width/2+10+16*(21+.25*parseInt(i))+(83-a)*(21+.25*parseInt(i)),n=this.state.height/2-115-4*i}this.setState({direction:t,x:e,y:n})}},{key:"setRandomHorseColor",value:function(){if(""===this.state.color){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];this.setState({color:t})}}},{key:"render",value:function(){return this.props.inProgress&&!this.state.running&&(this.setState({running:!0}),this.takeAStepFromApi()),i.a.createElement(D,{x:this.state.x,y:this.state.y,width:"5",height:"5",strokeColor:this.state.color},i.a.createElement("text",{x:this.state.x+10,y:this.state.y},"test"))}}]),e}(i.a.Component);function C(){var t=Object(y.a)(["\nfill:red;stroke:red;stroke-width:5;opacity:1;stroke-dasharray:5,5\n"]);return C=function(){return t},t}function A(){var t=Object(y.a)(["\nfill:red;stroke:white;stroke-width:5;opacity:1;stroke-dasharray:5,5\n"]);return A=function(){return t},t}function R(){var t=Object(y.a)(["\nfill:green;stroke:black;stroke-width:5;opacity:1\n"]);return R=function(){return t},t}function L(){var t=Object(y.a)(["\nfill:#6f3f16;stroke:black;stroke-width:5;opacity:1\n"]);return L=function(){return t},t}var z=j.a.rect(L()),T=j.a.rect(R()),P=j.a.line(A()),_=j.a.line(C()),F=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(h.a)(this,Object(u.a)(e).call(this,t))).state={width:0,height:0,horseList:[]},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(m.a)(Object(m.a)(n))),n.makeHorsesRun=n.makeHorsesRun.bind(Object(m.a)(Object(m.a)(n))),n.updateHorseList=n.updateHorseList.bind(Object(m.a)(Object(m.a)(n))),n}return Object(f.a)(e,t),Object(c.a)(e,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),this.makeHorsesRun()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"makeHorsesRun",value:function(){for(var t in this.props.horses)t.takeAStepFromApi()}},{key:"updateHorseList",value:function(t){var e=this.state.horseList.slice();e.findIndex(function(e){return e.name===t})<0&&(e.push({name:t,time:Date.now()}),this.setState({horseList:e}))}},{key:"render",value:function(){var t=this,e=this.props.horses.length;return i.a.createElement("svg",{style:{width:"100%",height:"100%",display:"block",margin:"auto"}},i.a.createElement(z,{x:(this.state.width/2-500).toString(),y:(this.state.height/2-250).toString(),rx:"20",ry:"20",width:"1000",height:"500"}),i.a.createElement(T,{x:(this.state.width/2-350).toString(),y:(this.state.height/2-100).toString(),rx:"20",ry:"20",width:"700",height:"200"}),i.a.createElement(P,{x1:(this.state.width/2).toString(),y1:(this.state.height/2-250).toString(),x2:(this.state.width/2).toString(),y2:(this.state.height/2-100).toString()}),i.a.createElement(_,{x1:(this.state.width/2).toString(),y1:(this.state.height/2-250+5).toString(),x2:(this.state.width/2).toString(),y2:(this.state.height/2-100+5).toString()}),this.props.horses.map(function(n,a){return t.updateHorseList(n.name),i.a.createElement(H,{key:a,step:"0",lap:"0",horseIndex:e<=5?6*a:e<=10?3*a:a,horse:n,inProgress:t.props.inProgress,roomid:t.props.roomid})}))}}]),e}(i.a.Component),M=n(111),G=(n(239),function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(h.a)(this,Object(u.a)(e).call(this))).state={width:0,height:0},t.updateWindowDimensions=t.updateWindowDimensions.bind(Object(m.a)(Object(m.a)(t))),t}return Object(f.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"render",value:function(){if(this.props.showResults){var t=this.state.width/2-100;return i.a.createElement(M.a,{data:this.props.horses,columns:[{Header:"Position",accessor:"position.rank"},{Header:"Name",accessor:"name"}],defaultPageSize:this.props.pageSize,className:"-striped",style:{position:"absolute",left:t},showPagination:!1,loadingText:"",defaultSorted:[{id:"position.rank"}]})}return""}}]),e}(i.a.Component));function N(){var t=Object(y.a)(["\n    -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;\n\t-webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;\n\tbox-shadow:inset 0px 1px 0px 0px #ffffff;\n\tbackground:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #ffffff), color-stop(1, #f6f6f6));\n\tbackground:-moz-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n\tbackground:-webkit-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n\tbackground:-o-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n\tbackground:-ms-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n\tbackground:linear-gradient(to bottom, #ffffff 5%, #f6f6f6 100%);\n\tfilter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0);\n\tbackground-color:#ffffff;\n\t-moz-border-radius:6px;\n\t-webkit-border-radius:6px;\n\tborder-radius:6px;\n\tborder:1px solid #dcdcdc;\n\tdisplay:inline-block;\n\tcursor:pointer;\n\tcolor:#666666;\n\tfont-family:Arial;\n\tfont-size:15px;\n\tfont-weight:bold;\n\tpadding:6px 24px;\n\ttext-decoration:none;\n\ttext-shadow:0px 1px 0px #ffffff;\n\tmargin-top: 3em;\n\t\n\t&:hover {\n        background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #f6f6f6), color-stop(1, #ffffff));\n        background:-moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n        background:-webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n        background:-o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n        background:-ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n        background:linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n        background-color:#f6f6f6;\n    }\n\n    &:active {\n        position:relative;\n        top:1px;\n    }\n\n"]);return N=function(){return t},t}var B=j.a.button(N()),U=function(t){function e(){return Object(s.a)(this,e),Object(h.a)(this,Object(u.a)(e).call(this))}return Object(f.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return this.props.inProgress?"":i.a.createElement(B,{className:"-highlight",onClick:this.props.start},"Start the race!")}}]),e}(i.a.Component);function Q(){var t=Object(y.a)(["\n  background-color:green;\n  width:100%;\n  height:100%;\n  position:fixed;\n"]);return Q=function(){return t},t}var J=j.a.div(Q()),X=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(h.a)(this,Object(u.a)(e).call(this))).state={room_id:0,race_started:!1,horses:[],inProgress:!1},t.startRace=t.startRace.bind(Object(m.a)(Object(m.a)(t))),t.obtainGameInfo=t.obtainGameInfo.bind(Object(m.a)(Object(m.a)(t))),t}return Object(f.a)(e,t),Object(c.a)(e,[{key:"componentWillMount",value:function(){this.setState({room_id:this.props.match.params.room_id}),this.obtainGameInfo()}},{key:"obtainGameInfo",value:function(){var t=this;W.a.get("https://iahorserace.azurewebsites.net//games/"+this.props.match.params.room_id).then(function(e){t.state.race_started||t.setState({horses:e.data.horses})}),this.state.race_started||setTimeout(function(){t.obtainGameInfo()},5e3)}},{key:"startRace",value:function(){this.setState({inProgress:!0,race_started:!0})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"A Horse Race Room # ",this.state.room_id),i.a.createElement(J,null,i.a.createElement(U,{inProgress:this.state.inProgress,start:this.startRace}),i.a.createElement(G,{horses:this.state.horses,showResults:this.state.inProgress,roomid:this.state.room_id,pageSize:5}),i.a.createElement(F,{horses:this.state.horses,inProgress:this.state.inProgress,roomid:this.state.room_id})))}}]),e}(i.a.Component),$=function(t){function e(){return Object(s.a)(this,e),Object(h.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement(l.a,null,i.a.createElement(d.a,null,i.a.createElement(p.a,{path:"/game",component:v}),i.a.createElement(p.a,{path:"/room/:room_id",component:X}),i.a.createElement(p.a,{path:"/",component:g})))}}]),e}(a.Component),q=function(t){function e(){return Object(s.a)(this,e),Object(h.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement($,null))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[114,2,1]]]);
//# sourceMappingURL=main.d4663d5d.chunk.js.map