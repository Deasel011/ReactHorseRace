(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,n){e.exports=n(242)},120:function(e,t,n){},122:function(e,t,n){e.exports=n.p+"static/media/logo.ee7cd8ed.svg"},123:function(e,t,n){},242:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),o=n(46),s=n.n(o),r=(n(120),n(5)),c=n(6),l=n(8),h=n(7),d=n(9),u=(n(122),n(123),n(243)),f=n(245),m=n(244),p=n(2),b=n(20),g=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).handleSubmit=function(){var t=document.getElementById("game-id-field").value;alert("HELLO "+t),e.props.history.push("/game")},e.handleSubmit=e.handleSubmit.bind(Object(p.a)(Object(p.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("h1",null,"HorseRace Group Insurance"),i.a.createElement(b.Form,{id:"formbox",name:"roombox",method:"get"},i.a.createElement("label",{htmlFor:"game-id-field"},"Enter the room you want to race in "),i.a.createElement(b.Text,{field:"name",id:"game-id-field",placeholder:"69"}),i.a.createElement("button",{type:"submit",onClick:function(){return e.props.history.push("/game?room="+document.getElementById("game-id-field").value)}},"Talk to me Goose!")),i.a.createElement("button",{onClick:this.props.history.push("/game")},"Room"))}}]),t}(i.a.Component),k=n(111),w=(n(217),n(23)),v=n.n(w),y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={width:0,height:0,horses:[],roomid:e.roomid},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(p.a)(Object(p.a)(n))),n.obtainGameInfo=n.obtainGameInfo.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),this.obtainGameInfo()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"obtainGameInfo",value:function(){var e=this;v.a.get("https://iahorserace.azurewebsites.net//games/"+this.state.roomid).then(function(t){e.state.race_started||e.setState({horses:t.data.horses})}),this.state.race_started||setTimeout(function(){e.obtainGameInfo()},1e3)}},{key:"render",value:function(){if(this.props.showResults){var e=this.state.width/2-200;return i.a.createElement(k.a,{data:this.state.horses,columns:[{Header:"Horses",accessor:"name"},{Header:"Position",accessor:"position.rank"},{Header:"Steps Taken",accessor:"position.steps"},{Header:"Time Spent",accessor:"position.timeInMillis"}],defaultPageSize:this.props.pageSize,className:"-striped",style:{position:"absolute",left:e},showPagination:!1,loadingText:"",defaultSorted:[{id:"position.steps",desc:!0},{id:"position.timeInMillis",desc:!1}]})}return""}}]),t}(i.a.Component),j=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).state={gameid:null,horse:null,horse_list:[]},e.setGameId=e.setGameId.bind(Object(p.a)(Object(p.a)(e))),e.obtainHorseNameFromQuery=e.obtainHorseNameFromQuery.bind(Object(p.a)(Object(p.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"obtainHorseNameFromQuery",value:function(){return console.log(new URLSearchParams(this.props.location.search).get("horse")),new URLSearchParams(this.props.location.search).get("horse")}},{key:"setGameId",value:function(e){this.setState({gameid:e})}},{key:"componentWillMount",value:function(){this.setState({horse:this.obtainHorseNameFromQuery()})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"Game Lobby #",this.state.gameid||"??"),i.a.createElement(O,{parent_props:this.state,history:this.props.history,setGameId:this.setGameId}),this.state.gameid&&i.a.createElement(y,{showResults:!0,roomid:this.state.gameid,pageSize:30}))}}]),t}(i.a.Component),O=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={gameid:n.props.gameid},n.validateHorseNameAvailable=n.validateHorseNameAvailable.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){}},{key:"validateHorseNameAvailable",value:function(e,t){var n=this;v.a.get("https://iahorserace.azurewebsites.net//games/"+this.state.gameid).then(function(a){var i=a.data.horses.findIndex(function(t){return t.name===e});if(console.log(i),i<0){var o={name:e};v.a.post("https://iahorserace.azurewebsites.net//games/"+n.state.gameid+"/horses",o).then(function(){t()})}else alert("Name:"+e+" is already in the game!")})}},{key:"render",value:function(){var e=this;return console.log(this.state.gameid),null==this.state.gameid?i.a.createElement("div",null,i.a.createElement("h1",null,"HorseRace Group Insurance"),i.a.createElement(b.Form,{id:"formbox",name:"roombox",method:"get"},i.a.createElement("label",{htmlFor:"game-id-field"},"Enter the room you want to race in "),i.a.createElement(b.Text,{field:"name",id:"game-id-field",placeholder:"69"}),i.a.createElement("button",{type:"submit",onClick:function(){e.props.setGameId(document.getElementById("game-id-field").value),e.setState({gameid:document.getElementById("game-id-field").value})}},"Talk to me Goose!"))):null==this.state.horse?i.a.createElement(b.Form,{id:"formbox",name:"horsebox",method:"get"},i.a.createElement("label",{htmlFor:"horse-id-field"},"Enter a horse name "),i.a.createElement(b.Text,{field:"name",id:"horse-id-field",placeholder:"James"}),i.a.createElement("button",{type:"submit",onClick:function(){return e.validateHorseNameAvailable(document.getElementById("horse-id-field").value,function(){e.setState({horse:document.getElementById("horse-id-field").value})})}},"Talk to me Goose!")):null!==this.state.horse?(console.log("horse not null"),i.a.createElement("div",null,i.a.createElement("h2",null,this.state.horse.charAt(0).toUpperCase()+this.state.horse.slice(1)),i.a.createElement("p",null,"Look out for your horse!!"))):void console.log("horse not null")}}]),t}(i.a.Component),E=j,x=n(19),S=n(16),I=n(72),W=n.n(I),H=n(107);function C(){var e=Object(x.a)(["\n    fill:black;stroke:",";stroke-width:5;opacity:1\n"]);return C=function(){return e},e}var D=S.a.rect(C(),function(e){return e.strokeColor}),A=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={name:e.horse.name,width:window.innerWidth,height:window.innerHeight,direction:"east",step:0,lap:0,x:0,y:0,horseId:e.horse.horseId,lapsToWin:e.lapsToWIn||1,horseIndex:n.props.horseIndex||0,rank:0,running:!1,finished:!1,color:"",timeStart:null},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(p.a)(Object(p.a)(n))),n.placeWithStep=n.placeWithStep.bind(Object(p.a)(Object(p.a)(n))),n.takeAStep=n.takeAStep.bind(Object(p.a)(Object(p.a)(n))),n.setRandomHorseColor=n.setRandomHorseColor.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillMount",value:function(){this.placeWithStep(),this.setRandomHorseColor()}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"takeAStep",value:function(){this.state.step>10&&(this.state.step+1)%100===0&&this.setState({lap:this.state.lap+1}),this.setState({step:this.state.step+1}),this.placeWithStep()}},{key:"takeAStepEachSecond",value:function(){var e=this;setTimeout(function(){e.takeAStep(),e.takeAStepEachSecond()},50)}},{key:"updateStepsTaken",value:function(e){v.a.put("https://iahorserace.azurewebsites.net//games/"+this.props.roomid+"/horses/"+this.state.horseId+"/position",e).then(function(e){}).catch(function(e){console.error(e.message)})}},{key:"takeAStepFromApi",value:function(){var e=Object(H.a)(W.a.mark(function e(){var t=this;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.a.post("https://iahorserace.azurewebsites.net//games/"+this.props.roomid+"/horses/"+this.state.horseId+"/step").then(function(e){t.takeAStep(),t.state.lapsToWin<=t.state.lap?(t.setState({finished:!0}),t.updateStepsTaken({finished:!0,timeInMillis:Date.now()%9e5,steps:t.state.step})):(t.takeAStepFromApi(),t.updateStepsTaken({timeInMillis:Date.now()%9e5,steps:t.state.step}))}).catch(function(e){console.log(t.state.name+" just stumbled..."),t.takeAStepFromApi()});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"placeWithStep",value:function(){var e,t=0,n=0,a=this.state.step,i=this.state.horseIndex;switch(a<17?1:a<33?2:a<67?3:a<83?4:5){case 1:e="east",t=this.state.width/2+10-(24+.25*parseInt(i))*a,n=this.state.height/2-115-4*i;break;case 2:e="south",t=this.state.width/2+10-16*(24+.25*parseInt(i)),n=this.state.height/2-115-4*i+22*(a-16);break;case 3:e="west",t=this.state.width/2+10-16*(24+.25*parseInt(i))+(21.5+.25*parseInt(i))*(a-32),n=this.state.height/2-115-4*i+352;break;case 4:e="north",t=this.state.width/2+10-16*(24+.25*parseInt(i))+34*(21.5+.25*parseInt(i)),n=this.state.height/2-115-4*i+352-22*(a-66);break;case 5:e="east",t=this.state.width/2+10+16*(21+.25*parseInt(i))+(83-a)*(21+.25*parseInt(i)),n=this.state.height/2-115-4*i}this.setState({direction:e,x:t,y:n})}},{key:"setRandomHorseColor",value:function(){if(""===this.state.color){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];this.setState({color:e})}}},{key:"render",value:function(){return this.props.inProgress&&!this.state.running&&(this.setState({running:!0}),this.takeAStepFromApi()),i.a.createElement(D,{x:this.state.x,y:this.state.y,width:"5",height:"5",strokeColor:this.state.color},i.a.createElement("text",{x:this.state.x+10,y:this.state.y},"test"))}}]),t}(i.a.Component);function G(){var e=Object(x.a)(["\nfill:red;stroke:red;stroke-width:5;opacity:1;stroke-dasharray:5,5\n"]);return G=function(){return e},e}function T(){var e=Object(x.a)(["\nfill:red;stroke:white;stroke-width:5;opacity:1;stroke-dasharray:5,5\n"]);return T=function(){return e},e}function R(){var e=Object(x.a)(["\nfill:green;stroke:black;stroke-width:5;opacity:1\n"]);return R=function(){return e},e}function z(){var e=Object(x.a)(["\nfill:#6f3f16;stroke:black;stroke-width:5;opacity:1\n"]);return z=function(){return e},e}var L=S.a.rect(z()),F=S.a.rect(R()),M=S.a.line(T()),P=S.a.line(G()),_=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={width:0,height:0,horseList:[]},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(p.a)(Object(p.a)(n))),n.makeHorsesRun=n.makeHorsesRun.bind(Object(p.a)(Object(p.a)(n))),n.updateHorseList=n.updateHorseList.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),this.makeHorsesRun()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"makeHorsesRun",value:function(){for(var e in this.props.horses)e.takeAStepFromApi()}},{key:"updateHorseList",value:function(e){var t=this.state.horseList.slice();t.findIndex(function(t){return t.name===e})<0&&(t.push({name:e,time:Date.now()}),this.setState({horseList:t}))}},{key:"render",value:function(){var e=this,t=this.props.horses.length;return i.a.createElement("svg",{style:{width:"100%",height:"100%",display:"block",margin:"auto"}},i.a.createElement(L,{x:(this.state.width/2-500).toString(),y:(this.state.height/2-250).toString(),rx:"20",ry:"20",width:"1000",height:"500"}),i.a.createElement(F,{x:(this.state.width/2-350).toString(),y:(this.state.height/2-100).toString(),rx:"20",ry:"20",width:"700",height:"200"}),i.a.createElement(M,{x1:(this.state.width/2).toString(),y1:(this.state.height/2-250).toString(),x2:(this.state.width/2).toString(),y2:(this.state.height/2-100).toString()}),i.a.createElement(P,{x1:(this.state.width/2).toString(),y1:(this.state.height/2-250+5).toString(),x2:(this.state.width/2).toString(),y2:(this.state.height/2-100+5).toString()}),this.props.horses.map(function(n,a){return e.updateHorseList(n.name),i.a.createElement(A,{key:a,step:"0",lap:"0",horseIndex:t<=5?6*a:t<=10?3*a:a,horse:n,inProgress:e.props.inProgress,roomid:e.props.roomid})}))}}]),t}(i.a.Component);function N(){var e=Object(x.a)(["\n    -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;\n\t-webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;\n\tbox-shadow:inset 0px 1px 0px 0px #ffffff;\n\tbackground:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #ffffff), color-stop(1, #f6f6f6));\n\tbackground:-moz-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n\tbackground:-webkit-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n\tbackground:-o-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n\tbackground:-ms-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n\tbackground:linear-gradient(to bottom, #ffffff 5%, #f6f6f6 100%);\n\tfilter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0);\n\tbackground-color:#ffffff;\n\t-moz-border-radius:6px;\n\t-webkit-border-radius:6px;\n\tborder-radius:6px;\n\tborder:1px solid #dcdcdc;\n\tdisplay:inline-block;\n\tcursor:pointer;\n\tcolor:#666666;\n\tfont-family:Arial;\n\tfont-size:15px;\n\tfont-weight:bold;\n\tpadding:6px 24px;\n\ttext-decoration:none;\n\ttext-shadow:0px 1px 0px #ffffff;\n\tmargin-top: 3em;\n\t\n\t&:hover {\n        background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #f6f6f6), color-stop(1, #ffffff));\n        background:-moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n        background:-webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n        background:-o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n        background:-ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n        background:linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n        background-color:#f6f6f6;\n    }\n\n    &:active {\n        position:relative;\n        top:1px;\n    }\n\n"]);return N=function(){return e},e}var B=S.a.button(N()),U=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.inProgress?"":i.a.createElement(B,{className:"-highlight",onClick:this.props.start},"Start the race!")}}]),t}(i.a.Component);function Q(){var e=Object(x.a)(["\n  background-color:green;\n  width:100%;\n  height:100%;\n  position:fixed;\n"]);return Q=function(){return e},e}var J=S.a.div(Q()),X=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).state={room_id:null,race_started:!1,horses:[],inProgress:!1},e.startRace=e.startRace.bind(Object(p.a)(Object(p.a)(e))),e.obtainGameInfo=e.obtainGameInfo.bind(Object(p.a)(Object(p.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.obtainGameInfo()}},{key:"obtainGameInfo",value:function(){var e=this;v.a.get("https://iahorserace.azurewebsites.net//games/"+this.state.room_id).then(function(t){e.state.race_started||e.setState({horses:t.data.horses})}),this.state.race_started||setTimeout(function(){e.obtainGameInfo()},2e3)}},{key:"startRace",value:function(){this.setState({inProgress:!0,race_started:!0})}},{key:"render",value:function(){var e=this;return this.state.room_id?(this.state.race_started||this.obtainGameInfo(),i.a.createElement("div",null,i.a.createElement("h1",null,"A Horse Race Room # ",this.state.room_id),i.a.createElement(J,null,i.a.createElement(U,{inProgress:this.state.inProgress,start:this.startRace}),i.a.createElement(y,{horses:this.state.horses,showResults:this.state.inProgress,roomid:this.state.room_id,pageSize:5}),i.a.createElement(_,{horses:this.state.horses,inProgress:this.state.inProgress,roomid:this.state.room_id})))):i.a.createElement(b.Form,{id:"formbox",name:"roombox",method:"get"},i.a.createElement("label",{htmlFor:"game-id-field"},"Enter the room you want to administer "),i.a.createElement(b.Text,{field:"name",id:"game-id-field",placeholder:"69"}),i.a.createElement("button",{type:"submit",onClick:function(){e.setState({room_id:document.getElementById("game-id-field").value})}},"Talk to me Goose!"))}}]),t}(i.a.Component),$=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(u.a,null,i.a.createElement(f.a,null,i.a.createElement(m.a,{path:"/game",component:E}),i.a.createElement(m.a,{path:"/room",component:X}),i.a.createElement(m.a,{path:"/",component:g})))}}]),t}(a.Component),q=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement($,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[114,2,1]]]);
//# sourceMappingURL=main.bc5eafed.chunk.js.map